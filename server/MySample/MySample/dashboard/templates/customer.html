{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Customer Report </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <link rel="stylesheet" href="{% static 'css/bootstrap-table.min.css' %}">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="50X50" href="{% static 'css/logoTS.png' %}">

    <!-- This page plugin CSS -->

    <!-- Custom CSS -->
    <link href="{% static 'css/style.min.css' %}" rel="stylesheet">

    <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css" rel="stylesheet">

    <!-- hide default search bar -->
    <style>
        .dataTables_filter {
            display: none;
        }
        
        input {
            border: 2px solid #5f76e8;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper" data-theme="light" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full" data-sidebar-position="fixed" data-header-position="fixed" data-boxed-layout="full">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <header class="topbar" data-navbarbg="skin6">
            <nav class="navbar top-navbar navbar-expand-md">
                <div class="navbar-header" data-logobg="skin6">
                    <!-- This is for the sidebar toggle which is visible on mobile only -->
                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)"><i
                            class="ti-menu ti-close"></i></a>
                    <!-- ============================================================== -->
                    <!-- Logo -->
                    <!-- ============================================================== -->
                    <div class="navbar-brand">
                        <!-- Logo icon -->
                        <a href="{% url 'customer:index_view' %}">
                            <b class="logo-icon">
                                <!-- Dark Logo icon -->
                                <img src="{% static 'css/logoTS.png' %}" alt="homepage" class="dark-logo" width ="60px" height="65"/>
                                
                            </b>
                            <!--End Logo icon -->
                            <!-- Logo text -->
                            <span class="logo-text">
                                <!-- dark Logo text -->
                                <img src="{% static 'css/text-logoTS.png' %}" alt="homepage" class="dark-logo" width ="150px" height="80" style="margin-left: 0px; padding: 0px;"/>
                                
                            </span>
                        </a>
                    </div>
                    <!-- ============================================================== -->
                    <!-- End Logo -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- Toggle which is visible on mobile only -->
                    <!-- ============================================================== -->
                    <a class="topbartoggler d-block d-md-none waves-effect waves-light" href="javascript:void(0)" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><i
                            class="ti-more"></i></a>
                </div>
                <!-- ============================================================== -->
                <!-- End Logo -->
                <!-- ============================================================== -->
            </nav>
        </header>
        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <aside class="left-sidebar" data-sidebarbg="skin6">
            <!-- Sidebar scroll-->
            <div class="scroll-sidebar" data-sidebarbg="skin6">
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav">
                    <ul id="sidebarnav">
                        <!-- <li class="sidebar-item"> <a class="sidebar-link" href="{% url 'customer:index_view' %}" aria-expanded="false"><i data-feather="grid" class="feather-icon"></i>
                            <span class="hide-menu">Home </span></a>
                        </li> -->
                        <li class="sidebar-item"> <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false"><i data-feather="grid" class="feather-icon"></i><span
                                    class="hide-menu">Dashboard </span></a>
                            <ul aria-expanded="false" class="collapse  first-level base-level-line">
                                <li class="sidebar-item"><a href="{% url 'dashboard:customer' %}" class="sidebar-link"><span
                                            class="hide-menu"> Customer
                                        </span></a>
                                </li>
                                <li class="sidebar-item"><a href="{% url 'dashboard:product_view' %}" class="sidebar-link"><span
                                            class="hide-menu"> Product
                                        </span></a>
                                </li>
                            </ul>
                        </li>
                        <li class="list-divider"></li>

                    </ul>
                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!--<div class="page-breadcrumb">
               
                <div class="row">
                    <div class="col-7 align-self-center">
                        <h4 class="page-title text-truncate text-dark font-weight-medium mb-1">Basic Initialisation</h4>
                        <div class="d-flex align-items-center">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb m-0 p-0">
                                    <li class="breadcrumb-item"><a href="index.html" class="text-muted">Home</a></li>
                                    <li class="breadcrumb-item text-muted active" aria-current="page">Library</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                    <div class="col-5 align-self-center">
                        <div class="customize-input float-right">
                            <select class="custom-select custom-select-set form-control bg-white border-0 custom-shadow custom-radius">
                                <option selected>Aug 19</option>
                                <option value="1">July 19</option>
                                <option value="2">Jun 19</option>
                            </select>
                        </div>
                    </div>
                </div>
            -->
            <!--</div>
             ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->

                <!-- multi-column ordering -->

                <h4 class="card-title">Customer Report</h4>

                <div class="container mb-2 mt-2">

                    <!--<div id="toolbar" class="select">
                      <select class="form-control"> 
                        <option value="">Export Basic</option>
                        <option value="all">Export All</option>
                        <option value="selected">Export Selected</option>
                      </select>
                    </div>-->
                    <table border="0" cellspacing="5" cellpadding="5">
                        <tbody>
                            <tr>
                                <td>Minimum Date:</td>
                                <td><input name="min" id="min" type="text"></td>
                            </tr>
                            <tr>
                                <td>Maximum Date:</td>
                                <td><input name="max" id="max" type="text"></td>
                            </tr>
                        </tbody>
                    </table>
                    <table id="table" class="display" data-toggle="table" data-pagination="true" data-search="true" data-search-align="left" data-show-column="true" data-show-toggle="true" data-show-fullscreen="true" data-show-pagination-switch="true"
                        data-pagination-pre-text="Previous" data-pagination-next-text="Next" data-pagination-h-align="left" data-pagination-detail-h-align="right" data-page-list="[5, 10, 20, All]" data-show-export="true">

                        <thead class="bg-info text-white">
                            <tr>
                                <th data-field="date-registered" data-sortable="true" data-switchable="false">Date Registered</th>
                                <th data-field="firstname" data-sortable="true" data-switchable="false">Firstname</th>
                                <th data-field="lastname" data-sortable="true" data-switchable="false">Lastname</th>
                                <th data-field="email" data-sortable="true" data-switchable="false">Email</th>
                                <th data-field="contact" data-sortable="true" data-switchable="false">Contact</th>
                                <th data-field="edit" data-sortable="false" data-switchable="false">Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for customer in object_list %}
                            <tr>
                                <td>{{customer.dateregistered}}</td>
                                <td>{{customer.firstname}}</td>
                                <td>{{customer.lastname}}</td>
                                <td>{{customer.email}}</td>
                                <td>{{customer.contact}}</td>
                                <td>
                                    <a type="button" class="btn btn-primary" style="height:36px; margin-bottom: 5px;" href="#" data-toggle="modal" data-target="#exampleModalView-{{customer.id}}">VIEW</a>
                                    <a type="button" class="btn btn-primary" style="height:36px; margin-bottom: 5px;" href="#" data-toggle="modal" data-target="#exampleModal-{{customer.id}}">DELETE</a>
                                    
                                    <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal-{{customer.id}}">
                                            DELETE
                                          </button> -->
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Date Registered</th>
                                <th>Firstname</th>
                                <th>Lastname</th>
                                <th>Email</th>
                                <th>Contact</th>
                                <th>Edit</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <footer class="footer text-center text-muted">
                <!-- <form id="form1" action="" method="POST" autocomplete="off" enctype="multipart/form-data">
                    {% csrf_token %}
                    <button href="#" class="btn btn-dark btn-lg float-center" type="submit">
                          Add Customer 
                </button>
                </form> -->
                <div>
                    <form id="buyForm" method="POST">
                            {% csrf_token %}
                            <button type="submit "id="btnBuy" name="btnBuy" style="height:36px; margin-bottom: 10px;" class="btn btn-primary">Go To Store</button>
                    </form>
                    <a class="btn btn-primary" href="{% url 'dashboard:customer_view' %}" role="button">Add Customer</a> &nbsp;
            </div>
                <p style="margin-top: 50px">All Rights Reserved by Techmart. </p>
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    </div>


    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.js"></script>

    <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.17.1/bootstrap-table.min.js"></script>
    <script src="{% static 'js/bootstrap-table-export.min.js' %}"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        var table = $('#table')

        $('select').on('change', function() {

            table.bootstrapTable({
                exportDataType: $(this).val(),
                exportTypes: 'excel'
            })
        });
    </script>

    <!-- date filter -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>

    <script>
        $(document).ready(function() {
            $.fn.dataTable.ext.search.push(function(settings, data, dataIndex) {
                var min = $('#min').datepicker("getDate");
                var max = $('#max').datepicker("getDate");
                var d = data[0].split("/");
                var startDate = new Date(d[1] + "/" + d[2] + "/" + d[0]);
                if (min == null && max == null) {
                    return true;
                }
                if (min == null && startDate <=
                    max) {
                    return true;
                }
                if (max == null && startDate >= min) {
                    return true;
                }
                if (startDate <=
                    max && startDate >= min) {
                    return true;
                }
                return false;
            });
            $("#min").datepicker({
                onSelect: function() {
                    table.draw();
                },
                changeMonth: true,
                changeYear: true,
                dateFormat: "dd/mm/yy"
            });
            $("#max").datepicker({
                onSelect: function() {
                    table.draw();
                },
                changeMonth: true,
                changeYear: true,
                dateFormat: "dd/mm/yy"
            });
            var table = $('#table').DataTable()
        });
    </script>



    <!-- disable default datatable features -->
    <script>
        $('#table').DataTable({
            paging: false,
            info: false,
        });
        $(".dataTables_info").hide();
    </script>
    <!-- Modal DELETE-->
    {% for customer in object_list %}
    <div class="modal fade" id="exampleModal-{{customer.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">DELETE RECORD</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
                </div>
                <form id="deleteForm" method="POST">
                    {% csrf_token %}
                <div class="modal-body">
                        <div class="form-group">
                                <input class="form control w-50" id="id" name="id" type="text" value={{customer.id}} hidden>
                            </div>
                    Are you sure you want to delete this record?
                </div>
                <div class="modal-footer">
                    <button type="submit" id="btnDelete" name="btnDelete" class="btn btn-primary">YES</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">NO</button>
                </div>
            </form>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Modal VIEW-->
    {% for customer in object_list %}
    <div class="modal fade" id="exampleModalView-{{customer.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">CUSTOMER INFORMATION</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
                </div>
                <form action="" id="updateForm" method="POST">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="form-group">
                            <input class="form control w-50" id="id" name="id" type="text" value={{customer.id}} hidden>
                        </div>
                        <div class="form-group">
                            <label class="text-dark">DATE REGISTERED:</label>
                            <input class="form control w-50"  id="date_register" name="date_register" type="date" value={{customer.dateregistered|date:"Y-m-d"}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">FIRST NAME:</label>
                            <input class="form control w-50" id="firstname" name="firstname" type="text" value={{customer.firstname}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">LAST NAME:</label>
                            <input class="form control w-50" id="lastname" name="lastname" type="text" value={{customer.lastname}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">ADDRESS - CITY: </label>
                            <input class="form control w-50" id="address" name="address" type="text" value={{customer.address}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">DATE OF BIRTH: </label>
                            <input class="form control w-50" id="date_bday" name="date_bday" type="date" value={{customer.birthdate|date:"Y-m-d"}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">PLACE OF BIRTH: </label>
                            <select class="form-control w-50" name="birthplace" type="text" value={{customer.birthplace}} required>
                                <option value="{{customer.birthplace}}" selected hidden>{{customer.birthplace}}</option>
                                <option>Cebu City</option>
                                <option>Lapu-Lapu City</option>
                                <option>Talisay City</option>
                                <option>Carcar City</option>
                              </select>
                            <!-- <input class="form control w-50" id="birthplace" name="birthplace" type="text" value={{customer.birthplace}}> -->
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">EMAIL:</label>
                            <input class="form control w-75" id="email" name="email" type="email" value={{customer.email}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">USERNAME:</label>
                            <input class="form control w-50" name="username" type="text" value={{customer.username}}>
                        </div>
                        <div class="form-group ">
                            <label class="text-dark ">CONTACT:</label>
                            <input class="form control w-50" id="contact" name="contact" type="contact" value={{customer.contact}}>
                        </div>
                    </div>
                    <div class="modal-footer ">
                        <button type="submit "id="btnUpdate" name="btnUpdate" class="btn btn-primary ">UPDATE</button>
                        <button type="button " class="btn btn-secondary " data-dismiss="modal ">CANCEL</button>
                    </div>
            </div>
            </form>
        </div>
    </div>
    {% endfor %}
    <script src="{% static 'js/app-style-switcher.js' %} "></script>
    <script src="{% static 'js/feather.min.js' %} "></script>
    <script src="{% static 'js/perfect-scrollbar.jquery.min.js' %} "></script>
    <script src="{% static 'js/sparkline.js' %} "></script>

    <script src="{% static 'js/sidebarmenu.js' %} "></script>

    <script src="{% static 'js/custom.min.js' %} "></script>

</body>

</html>